{
  "info": {
    "name": "AutoRia API - Analytics Endpoints Collection",
    "description": "–ö–æ–ª–ª–µ–∫—Ü–∏—è –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ –∏ —Ç—Ä–µ–∫–∏–Ω–≥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "exec": [
          "// –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏",
          "if (!pm.environment.get('ad_id')) {",
          "    pm.environment.set('ad_id', '1');",
          "}",
          "if (!pm.environment.get('task_id')) {",
          "    pm.environment.set('task_id', 'test-task-123');",
          "}",
          "console.log('üìä Analytics pre-request script executed for:', pm.info.requestName);"
        ],
        "type": "text/javascript"
      }
    }
  ],
  "item": [
    {
      "name": "üìä Get Ad Analytics",
      "request": {
        "method": "GET",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "Authorization",
            "value": "Bearer {{access_token}}"
          }
        ],
        "url": {
          "raw": "{{base_url}}/api/ads/analytics/ad/{{ad_id}}/",
          "host": [
            "{{base_url}}"
          ],
          "path": [
            "api",
            "ads",
            "analytics",
            "ad",
            "{{ad_id}}"
          ]
        }
      },
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test('Ad analytics retrieved successfully', function () { pm.response.to.have.status(200); });",
              "pm.test('Response has analytics data', function () { pm.expect(pm.response.json()).to.have.property('views'); });"
            ],
            "type": "text/javascript"
          }
        }
      ]
    },
    {
      "name": "üìä Get Ad Analytics for Card",
      "request": {
        "method": "GET",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "Authorization",
            "value": "Bearer {{access_token}}"
          }
        ],
        "url": {
          "raw": "{{base_url}}/api/ads/analytics/ad/{{ad_id}}/card/",
          "host": [
            "{{base_url}}"
          ],
          "path": [
            "api",
            "ads",
            "analytics",
            "ad",
            "{{ad_id}}",
            "card"
          ]
        }
      },
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test('Ad card analytics retrieved successfully', function () { pm.response.to.have.status(200); });"
            ],
            "type": "text/javascript"
          }
        }
      ]
    },
    {
      "name": "üßπ Reset Ad Counters",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "Authorization",
            "value": "Bearer {{access_token}}"
          }
        ],
        "url": {
          "raw": "{{base_url}}/api/ads/analytics/ad/reset-counters/",
          "host": [
            "{{base_url}}"
          ],
          "path": [
            "api",
            "ads",
            "analytics",
            "ad",
            "reset-counters"
          ]
        },
        "body": {
          "mode": "raw",
          "raw": "{\n  \"ad_id\": \"{{ad_id}}\"\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        }
      },
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test('Ad counters reset successfully', function () { pm.response.to.have.status(200); });"
            ],
            "type": "text/javascript"
          }
        }
      ]
    },
    {
      "name": "üìä Track Ad Interaction",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "url": {
          "raw": "{{base_url}}/api/ads/analytics/track/ad-interaction/",
          "host": [
            "{{base_url}}"
          ],
          "path": [
            "api",
            "ads",
            "analytics",
            "track",
            "ad-interaction"
          ]
        },
        "body": {
          "mode": "raw",
          "raw": "{\n  \"ad_id\": \"{{ad_id}}\",\n  \"interaction_type\": \"click\",\n  \"user_agent\": \"PostmanRuntime/7.32.3\"\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        }
      },
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test('Ad interaction tracked successfully', function () { pm.response.to.have.status(201); });"
            ],
            "type": "text/javascript"
          }
        }
      ]
    },
    {
      "name": "üìä Track Ad View Detail",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "url": {
          "raw": "{{base_url}}/api/ads/analytics/track/ad-view-detail/",
          "host": [
            "{{base_url}}"
          ],
          "path": [
            "api",
            "ads",
            "analytics",
            "track",
            "ad-view-detail"
          ]
        },
        "body": {
          "mode": "raw",
          "raw": "{\n  \"ad_id\": \"{{ad_id}}\",\n  \"user_agent\": \"PostmanRuntime/7.32.3\",\n  \"referrer\": \"https://autoria.com\"\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        }
      },
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test('Ad view detail tracked successfully', function () { pm.response.to.have.status(201); });"
            ],
            "type": "text/javascript"
          }
        }
      ]
    },
    {
      "name": "üìä Track Page View",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "url": {
          "raw": "{{base_url}}/api/ads/analytics/track/page-view/",
          "host": [
            "{{base_url}}"
          ],
          "path": [
            "api",
            "ads",
            "analytics",
            "track",
            "page-view"
          ]
        },
        "body": {
          "mode": "raw",
          "raw": "{\n  \"page_url\": \"/ads/cars/\",\n  \"user_agent\": \"PostmanRuntime/7.32.3\"\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        }
      },
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test('Page view tracked successfully', function () { pm.response.to.have.status(201); });"
            ],
            "type": "text/javascript"
          }
        }
      ]
    },
    {
      "name": "üìû Track Phone View",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "url": {
          "raw": "{{base_url}}/api/ads/analytics/track/phone-view/",
          "host": [
            "{{base_url}}"
          ],
          "path": [
            "api",
            "ads",
            "analytics",
            "track",
            "phone-view"
          ]
        },
        "body": {
          "mode": "raw",
          "raw": "{\n  \"ad_id\": \"{{ad_id}}\",\n  \"user_agent\": \"PostmanRuntime/7.32.3\"\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        }
      },
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test('Phone view tracked successfully', function () { pm.response.to.have.status(201); });"
            ],
            "type": "text/javascript"
          }
        }
      ]
    },
    {
      "name": "üìä Track Search Query",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "url": {
          "raw": "{{base_url}}/api/ads/analytics/track/search-query/",
          "host": [
            "{{base_url}}"
          ],
          "path": [
            "api",
            "ads",
            "analytics",
            "track",
            "search-query"
          ]
        },
        "body": {
          "mode": "raw",
          "raw": "{\n  \"query\": \"BMW X5\",\n  \"results_count\": 25,\n  \"user_agent\": \"PostmanRuntime/7.32.3\"\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        }
      },
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test('Search query tracked successfully', function () { pm.response.to.have.status(201); });"
            ],
            "type": "text/javascript"
          }
        }
      ]
    },
    {
      "name": "üìä Update Page View Metrics",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "url": {
          "raw": "{{base_url}}/api/ads/analytics/track/update-page-metrics/",
          "host": [
            "{{base_url}}"
          ],
          "path": [
            "api",
            "ads",
            "analytics",
            "track",
            "update-page-metrics"
          ]
        },
        "body": {
          "mode": "raw",
          "raw": "{\n  \"page_url\": \"/ads/cars/\",\n  \"time_spent\": 120,\n  \"user_agent\": \"PostmanRuntime/7.32.3\"\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        }
      },
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test('Page metrics updated successfully', function () { pm.response.to.have.status(200); });"
            ],
            "type": "text/javascript"
          }
        }
      ]
    },
    {
      "name": "üìä Analytics Dashboard",
      "request": {
        "method": "GET",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "Authorization",
            "value": "Bearer {{access_token}}"
          }
        ],
        "url": {
          "raw": "{{base_url}}/api/ads/analytics/dashboard/",
          "host": [
            "{{base_url}}"
          ],
          "path": [
            "api",
            "ads",
            "analytics",
            "dashboard"
          ]
        }
      },
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test('Analytics dashboard accessible', function () { pm.response.to.have.status(200); });"
            ],
            "type": "text/javascript"
          }
        }
      ]
    },
    {
      "name": "üìä Analytics Forecast",
      "request": {
        "method": "GET",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "Authorization",
            "value": "Bearer {{access_token}}"
          }
        ],
        "url": {
          "raw": "{{base_url}}/api/ads/analytics/forecast/",
          "host": [
            "{{base_url}}"
          ],
          "path": [
            "api",
            "ads",
            "analytics",
            "forecast"
          ]
        }
      },
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test('Analytics forecast accessible', function () { pm.response.to.have.status(200); });"
            ],
            "type": "text/javascript"
          }
        }
      ]
    },
    {
      "name": "üìä Search Insights",
      "request": {
        "method": "GET",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "Authorization",
            "value": "Bearer {{access_token}}"
          }
        ],
        "url": {
          "raw": "{{base_url}}/api/ads/analytics/search/insights/",
          "host": [
            "{{base_url}}"
          ],
          "path": [
            "api",
            "ads",
            "analytics",
            "search",
            "insights"
          ]
        }
      },
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test('Search insights accessible', function () { pm.response.to.have.status(200); });"
            ],
            "type": "text/javascript"
          }
        }
      ]
    },
    {
      "name": "üìä Search Series",
      "request": {
        "method": "GET",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "Authorization",
            "value": "Bearer {{access_token}}"
          }
        ],
        "url": {
          "raw": "{{base_url}}/api/ads/analytics/search/series/",
          "host": [
            "{{base_url}}"
          ],
          "path": [
            "api",
            "ads",
            "analytics",
            "search",
            "series"
          ]
        }
      },
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test('Search series accessible', function () { pm.response.to.have.status(200); });"
            ],
            "type": "text/javascript"
          }
        }
      ]
    },
    {
      "name": "üë§ User Analytics",
      "request": {
        "method": "GET",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "Authorization",
            "value": "Bearer {{access_token}}"
          }
        ],
        "url": {
          "raw": "{{base_url}}/api/ads/statistics/user/",
          "host": [
            "{{base_url}}"
          ],
          "path": [
            "api",
            "ads",
            "statistics",
            "user"
          ]
        }
      },
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test('User analytics accessible', function () { pm.response.to.have.status(200); });"
            ],
            "type": "text/javascript"
          }
        }
      ]
    },
    {
      "name": "üìä Analytics Task Status",
      "request": {
        "method": "GET",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "Authorization",
            "value": "Bearer {{access_token}}"
          }
        ],
        "url": {
          "raw": "{{base_url}}/api/ads/statistics/task-status/{{task_id}}/",
          "host": [
            "{{base_url}}"
          ],
          "path": [
            "api",
            "ads",
            "statistics",
            "task-status",
            "{{task_id}}"
          ]
        }
      },
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test('Task status accessible', function () { pm.response.to.have.status(200); });"
            ],
            "type": "text/javascript"
          }
        }
      ]
    }
  ]
}