# üß™ –ö–µ—Ä—ñ–≤–Ω–∏—Ü—Ç–≤–æ –∑ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è AutoRia API —á–µ—Ä–µ–∑ Postman

## üìã –ó–º—ñ—Å—Ç

1. [–®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç](#-—à–≤–∏–¥–∫–∏–π-—Å—Ç–∞—Ä—Ç)
2. [–î–æ—Å—Ç—É–ø–Ω—ñ –∫–æ–ª–µ–∫—Ü—ñ—ó](#-–¥–æ—Å—Ç—É–ø–Ω—ñ-–∫–æ–ª–µ–∫—Ü—ñ—ó)
3. [–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è](#-–∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞-—ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è)
4. [–ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Newman](#-–∑–∞–ø—É—Å–∫-—á–µ—Ä–µ–∑-newman)
5. [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–ª–µ–∫—Ü—ñ–π](#-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–∫–æ–ª–µ–∫—Ü—ñ–π)
6. [–í—ñ–¥–ª–∞–¥–∫–∞ —Ç–∞ –≤–∏—Ä—ñ—à–µ–Ω–Ω—è –ø—Ä–æ–±–ª–µ–º](#-–≤—ñ–¥–ª–∞–¥–∫–∞-—Ç–∞-–≤–∏—Ä—ñ—à–µ–Ω–Ω—è-–ø—Ä–æ–±–ª–µ–º)

## üöÄ –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç

### –í–∏–º–æ–≥–∏

- **Backend –∑–∞–ø—É—â–µ–Ω–æ** –Ω–∞ `http://localhost:8000` –≤ DEBUG —Ä–µ–∂–∏–º—ñ
- **Newman** –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ: `npm install -g newman`
- **Postman** (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è –≤—ñ–∑—É–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è)

### üì¶ –ö–∞–Ω–æ–Ω—ñ—á–Ω—ñ –∫–æ–ª–µ–∫—Ü—ñ—ó

| –ö–æ–ª–µ–∫—Ü—ñ—è | –ó–∞–ø–∏—Ç—ñ–≤ | –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è |
|----------|---------|--------------|
| **Complete Test Suite** ‚≠ê | 94 | –ü–æ–≤–Ω–∏–π –Ω–∞–±—ñ—Ä —Ç–µ—Å—Ç—ñ–≤ (—Ä–µ–∫–æ–º–µ–Ω–¥—É—î—Ç—å—Å—è) |
| **Core API** | 32 | –û—Å–Ω–æ–≤–Ω—ñ API endpoints |
| **Currency API** | 7 | –í–∞–ª—é—Ç–Ω—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó |
| **Moderation API** | 5 | –ú–æ–¥–µ—Ä–∞—Ü—ñ—è –∫–æ–Ω—Ç–µ–Ω—Ç—É |
| **Full Swagger** | 197 | –í—Å—ñ endpoints –∑ Swagger |

### –ö—Ä–æ–∫ 1: –°—Ç–≤–æ—Ä—ñ—Ç—å —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Å—É–ø–µ—Ä–∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞

```bash
# –ó –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó backend
python ensure_test_superuser.py
```

–¶–µ —Å—Ç–≤–æ—Ä–∏—Ç—å/–æ–Ω–æ–≤–∏—Ç—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ `pvs.versia@gmail.com` –∑ –ø—Ä–∞–≤–∞–º–∏ superuser.

### –ö—Ä–æ–∫ 2: –ó–∞–ø—É—Å–∫ –≤—Å—ñ—Ö —Ç–µ—Å—Ç—ñ–≤

```bash
# –ó –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó backend
newman run AutoRia_API_Complete_Test_Suite.postman_collection.json \
    -e AutoRia_API_Complete_Test_Suite.postman_environment.json
```

### –ó–∞–ø—É—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ—ó –∫–æ–ª–µ–∫—Ü—ñ—ó

```bash
# Core API (32 –∑–∞–ø–∏—Ç–∏)
newman run AutoRia_API_Core.postman_collection.json \
    -e AutoRia_API_Complete_Test_Suite.postman_environment.json

# Currency API (7 –∑–∞–ø–∏—Ç—ñ–≤)
newman run AutoRia_API_Currency.postman_collection.json \
    -e AutoRia_API_Complete_Test_Suite.postman_environment.json

# Moderation API (5 –∑–∞–ø–∏—Ç—ñ–≤)
newman run AutoRia_API_Moderation.postman_collection.json \
    -e AutoRia_API_Complete_Test_Suite.postman_environment.json

# Full Swagger (197 –µ–Ω–¥–ø–æ—ñ–Ω—Ç—ñ–≤)
newman run AutoRia_Complete_197_Endpoints_FULL_SWAGGER.postman_collection.json \
    -e AutoRia_API_Complete_Test_Suite.postman_environment.json \
    --timeout-request 30000
```

### –ó–∞–ø—É—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏—Ö –≥—Ä—É–ø (–ø–∞–ø–æ–∫) –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ –∫–æ–ª–µ–∫—Ü—ñ—ó

```bash
# –ö—Ä–∏—Ç–∏—á–Ω—ñ endpoints
newman run AutoRia_API_Complete_Test_Suite.postman_collection.json \
    -e AutoRia_API_Complete_Test_Suite.postman_environment.json \
    --folder "üìÅ Essential Endpoints (11 requests)"

# –û—Å–Ω–æ–≤–Ω—ñ API
newman run AutoRia_API_Complete_Test_Suite.postman_collection.json \
    -e AutoRia_API_Complete_Test_Suite.postman_environment.json \
    --folder "üìÅ Core API (32 requests)"

# –ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó
newman run AutoRia_API_Complete_Test_Suite.postman_collection.json \
    -e AutoRia_API_Complete_Test_Suite.postman_environment.json \
    --folder "üìÅ Administration (13 requests)"

# AI —Å–µ—Ä–≤—ñ—Å–∏
newman run AutoRia_API_Complete_Test_Suite.postman_collection.json \
    -e AutoRia_API_Complete_Test_Suite.postman_environment.json \
    --folder "üìÅ AI Services (9 requests)"
```

## üì¶ –î–æ—Å—Ç—É–ø–Ω—ñ –∫–æ–ª–µ–∫—Ü—ñ—ó

| –ö–æ–ª–µ–∫—Ü—ñ—è | –§–∞–π–ª | –ó–∞–ø–∏—Ç—ñ–≤ | –û–ø–∏—Å |
|----------|------|---------|------|
| **Complete Test Suite** | `AutoRia_API_Complete_Test_Suite.postman_collection.json` | 94 | –ü–æ–≤–Ω–∏–π –Ω–∞–±—ñ—Ä —Ç–µ—Å—Ç—ñ–≤ –≤—Å—ñ—Ö –æ—Å–Ω–æ–≤–Ω–∏—Ö —Ñ—É–Ω–∫—Ü—ñ–π |
| **Core API** | `AutoRia_API_Core.postman_collection.json` | 32 | –ë–∞–∑–æ–≤—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó: auth, users, accounts, ads, references |
| **Currency API** | `AutoRia_API_Currency.postman_collection.json` | 7 | –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü—ñ—è –≤–∞–ª—é—Ç —Ç–∞ –∫—É—Ä—Å–∏ |
| **Moderation API** | `AutoRia_API_Moderation.postman_collection.json` | 5 | –ö–æ–Ω—Ç–µ–Ω—Ç-–º–æ–¥–µ—Ä–∞—Ü—ñ—è —Ç–∞ —Ü–µ–Ω–∑—É—Ä–∞ |
| **Full Swagger** | `AutoRia_Complete_197_Endpoints_FULL_SWAGGER.postman_collection.json` | 197 | –í—Å—ñ –µ–Ω–¥–ø–æ—ñ–Ω—Ç–∏ –∑—ñ Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó |

## ü§ñ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è

### –Ø–∫ —Ü–µ –ø—Ä–∞—Ü—é—î

–í—Å—ñ –∫–æ–ª–µ–∫—Ü—ñ—ó **–ø–æ–≤–Ω—ñ—Å—Ç—é —Å–∞–º–æ–¥–æ—Å—Ç–∞—Ç–Ω—ñ** —ñ –Ω–µ –ø–æ—Ç—Ä–µ–±—É—é—Ç—å —Ä—É—á–Ω–æ–≥–æ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è:

1. **Pre-request Scripts –Ω–∞ —Ä—ñ–≤–Ω—ñ –∫–æ–ª–µ–∫—Ü—ñ—ó** –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ:
   - –°—Ç–≤–æ—Ä—é—é—Ç—å/–æ–Ω–æ–≤–ª—é—é—Ç—å —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Å—É–ø–µ—Ä–∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ —á–µ—Ä–µ–∑ `/api/users/test/ensure-superuser/`
   - –õ–æ–≥—ñ–Ω—è—Ç—å –ø—ñ–¥ —Ä—ñ–∑–Ω–∏–º–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º–∏ (regular, admin, superuser)
   - –ó–±–µ—Ä—ñ–≥–∞—é—Ç—å —Ç–æ–∫–µ–Ω–∏ –≤ –∑–º—ñ–Ω–Ω–∏—Ö –æ—Ç–æ—á–µ–Ω–Ω—è

2. **Test Scripts** –Ω–∞ —Ä—ñ–≤–Ω—ñ –∑–∞–ø–∏—Ç—É –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:
   - –°—Ç–∞—Ç—É—Å-–∫–æ–¥–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π
   - –°—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–∏—Ö
   - –ë—ñ–∑–Ω–µ—Å-–ª–æ–≥—ñ–∫—É

3. **–î–∏–Ω–∞–º—ñ—á–Ω—ñ –∑–º—ñ–Ω–Ω—ñ** (`{{base_url}}`, `{{admin_access_token}}`) –ø—ñ–¥—Å—Ç–∞–≤–ª—è—é—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ

### –¢–µ—Å—Ç–æ–≤—ñ –æ–±–ª—ñ–∫–æ–≤—ñ –¥–∞–Ω—ñ

–°—Ç–≤–æ—Ä—é—é—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø—Ä–∏ –ø–µ—Ä—à–æ–º—É –∑–∞–ø—É—Å–∫—É:

| –†–æ–ª—å | Email | –ü–∞—Ä–æ–ª—å |
|------|-------|--------|
| **Superuser/Admin** | `pvs.versia@gmail.com` | `12345678` |
| **Regular User** | `test.user@example.com` | `12345678` |
| **Seller** | `seller1@gmail.com` | `12345678` |

### –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞–Ω—ñ Backend Endpoints

#### –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø–æ—Ç–æ—á–Ω–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞

```http
GET {{base_url}}/api/users/profile/
Authorization: Bearer {{access_token}}
```

–í—ñ–¥–ø–æ–≤—ñ–¥—å:
```json
{
    "id": 2,
    "email": "pvs.versia@gmail.com",
    "is_staff": true,
    "is_superuser": true,
    "profile": {
        "name": "",
        "surname": "",
        "age": null,
        "avatar": null
    }
}
```

#### –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —Å—É–ø–µ—Ä–∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞

–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ Django management command –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º —Ç–µ—Å—Ç—ñ–≤:

```bash
cd backend
python manage.py shell -c "
from apps.users.models import UserModel;
user, created = UserModel.objects.get_or_create(
    email='pvs.versia@gmail.com',
    defaults={'is_staff': True, 'is_superuser': True, 'is_active': True}
);
user.set_password('12345678');
user.is_staff = True;
user.is_superuser = True;
user.is_active = True;
user.save();
print(f'Superuser {\"created\" if created else \"updated\"}: {user.email}')
"
```

## üèÉ –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Newman

### –ë–∞–∑–æ–≤—ñ –∫–æ–º–∞–Ω–¥–∏

```bash
# –ó –¥–µ—Ñ–æ–ª—Ç–Ω–∏–º —Ç–∞–π–º–∞—É—Ç–æ–º
newman run <collection>.postman_collection.json \
    -e AutoRia_API_Complete_Test_Suite.postman_environment.json

# –ó –∑–±—ñ–ª—å—à–µ–Ω–∏–º —Ç–∞–π–º–∞—É—Ç–æ–º (–¥–ª—è –ø–æ–≤—ñ–ª—å–Ω–∏—Ö –µ–Ω–¥–ø–æ—ñ–Ω—Ç—ñ–≤)
newman run <collection>.postman_collection.json \
    -e AutoRia_API_Complete_Test_Suite.postman_environment.json \
    --timeout-request 30000

# –ó –∑–≤—ñ—Ç–æ–º –≤ HTML
newman run <collection>.postman_collection.json \
    -e AutoRia_API_Complete_Test_Suite.postman_environment.json \
    --reporters cli,html \
    --reporter-html-export ./test-results.html

# –ó JSON –∑–≤—ñ—Ç–æ–º
newman run <collection>.postman_collection.json \
    -e AutoRia_API_Complete_Test_Suite.postman_environment.json \
    --reporters cli,json \
    --reporter-json-export ./test-results.json
```

### –ü–∞—Ä–∞–º–µ—Ç—Ä–∏ Newman

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –û–ø–∏—Å | –ü—Ä–∏–∫–ª–∞–¥ |
|----------|------|---------|
| `--timeout-request` | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∏–π —á–∞—Å –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ (–º—Å) | `30000` (30 —Å–µ–∫) |
| `--delay-request` | –ó–∞—Ç—Ä–∏–º–∫–∞ –º—ñ–∂ –∑–∞–ø–∏—Ç–∞–º–∏ (–º—Å) | `100` |
| `--bail` | –ó—É–ø–∏–Ω–∫–∞ –ø—Ä–∏ –ø–µ—Ä—à—ñ–π –ø–æ–º–∏–ª—Ü—ñ | `--bail` |
| `--folder` | –ó–∞–ø—É—Å–∫ —Ç—ñ–ª—å–∫–∏ –ø–µ–≤–Ω–æ—ó –ø–∞–ø–∫–∏ | `--folder "Authentication"` |
| `--reporters` | –§–æ—Ä–º–∞—Ç–∏ –∑–≤—ñ—Ç—ñ–≤ | `cli,html,json` |
| `--color` | –ö–æ–ª—å–æ—Ä–æ–≤–∏–π –≤–∏–≤—ñ–¥ | `on` –∞–±–æ `off` |

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–ª–µ–∫—Ü—ñ–π

### Collection Pre-request Script

```javascript
// –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –ª–æ–≥—ñ–Ω –∞–¥–º—ñ–Ω–∞/—Å—É–ø–µ—Ä–∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
pm.sendRequest({
    url: pm.environment.get('base_url') + '/api/auth/login',
    method: 'POST',
    header: {'Content-Type': 'application/json'},
    body: {
        mode: 'raw',
        raw: JSON.stringify({
            email: pm.environment.get('admin_user_email'),
            password: pm.environment.get('admin_user_password')
        })
    }
}, function(err, res) {
    if (!err && res.code === 200) {
        const jsonData = res.json();
        pm.environment.set('admin_access_token', jsonData.access);
        pm.environment.set('admin_refresh_token', jsonData.refresh);
        console.log('‚úÖ Admin logged in');
        
        // –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ –ø—Ä–∞–≤–∞ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
        pm.sendRequest({
            url: pm.environment.get('base_url') + '/api/users/profile/',
            method: 'GET',
            header: {
                'Authorization': `Bearer ${jsonData.access}`
            }
        }, function(err, res) {
            if (!err && res.code === 200) {
                const user = res.json();
                console.log(`üë§ User: ${user.email}`);
                console.log(`üëë Superuser: ${user.is_superuser}`);
                console.log(`üîß Staff: ${user.is_staff}`);
            }
        });
    }
});
```

### Request Pre-request Script

```javascript
// –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –∑–±–µ—Ä–µ–∂–µ–Ω–æ–≥–æ —Ç–æ–∫–µ–Ω–∞
const adminToken = pm.environment.get('admin_access_token');
if (adminToken) {
    pm.request.headers.add({
        key: 'Authorization',
        value: `Bearer ${adminToken}`
    });
}
```

### Test Script

```javascript
// –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å—É
pm.test("‚úÖ –ó–∞–ø–∏—Ç —É—Å–ø—ñ—à–Ω–∏–π", function () {
    pm.expect(pm.response.code).to.be.oneOf([200, 201]);
});

// –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏
pm.test("‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –≤–∞–ª—ñ–¥–Ω–∞", function () {
    const jsonData = pm.response.json();
    pm.expect(jsonData).to.have.property('id');
    pm.expect(jsonData).to.have.property('email');
});

// –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –∑–º—ñ–Ω–Ω–æ—ó
pm.test("‚úÖ –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è ID –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞", function () {
    const jsonData = pm.response.json();
    pm.environment.set('created_user_id', jsonData.id);
});
```

## üîç –í—ñ–¥–ª–∞–¥–∫–∞ —Ç–∞ –≤–∏—Ä—ñ—à–µ–Ω–Ω—è –ø—Ä–æ–±–ª–µ–º

### –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ backend

```bash
curl http://localhost:8000/health
```

–û—á—ñ–∫—É—î—Ç—å—Å—è:
```json
{
    "status": "healthy",
    "timestamp": "2025-01-01T12:00:00Z"
}
```

### –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ DEBUG —Ä–µ–∂–∏–º—É

Backend –ø–æ–≤–∏–Ω–µ–Ω –±—É—Ç–∏ –∑–∞–ø—É—â–µ–Ω–∏–π –∑ `DEBUG=True` –≤ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è—Ö, —ñ–Ω–∞–∫—à–µ —Ç–µ—Å—Ç–æ–≤—ñ endpoints –Ω–µ –±—É–¥—É—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ñ.

### –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Å—É–ø–µ—Ä–∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞

```bash
curl -X POST http://localhost:8000/api/users/test/ensure-superuser/ \
    -H "Content-Type: application/json" \
    -d '{"email":"pvs.versia@gmail.com","password":"12345678"}'
```

### –ß–∞—Å—Ç—ñ –ø–æ–º–∏–ª–∫–∏

#### 403 Forbidden –Ω–∞ –∞–¥–º—ñ–Ω—Å—å–∫–∏—Ö –µ–Ω–¥–ø–æ—ñ–Ω—Ç–∞—Ö

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ —Å—Ç–≤–æ—Ä–µ–Ω–æ —Å—É–ø–µ—Ä–∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∞–±–æ —Ç–æ–∫–µ–Ω –Ω–µ –∑–±–µ—Ä–µ–∂–µ–Ω–æ

**–†—ñ—à–µ–Ω–Ω—è:**
1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ Pre-request Script –∫–æ–ª–µ–∫—Ü—ñ—ó
2. –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ `admin_access_token` –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –≤ environment
3. –ó–∞–ø—É—Å—Ç—ñ—Ç—å –µ–Ω–¥–ø–æ—ñ–Ω—Ç `/api/users/test/ensure-superuser/` –≤—Ä—É—á–Ω—É

#### 500 Internal Server Error

**–ü—Ä–∏—á–∏–Ω–∞:** –ü—Ä–æ–±–ª–µ–º–∞ –Ω–∞ backend –∞–±–æ –≤—ñ–¥—Å—É—Ç–Ω—ñ –¥–∞–Ω—ñ

**–†—ñ—à–µ–Ω–Ω—è:**
1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏ Django: `backend/logs/django.log`
2. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –∫–æ–Ω—Å–æ–ª—å backend
3. –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ –±–∞–∑–∞ –¥–∞–Ω–∏—Ö –º—ñ—Å—Ç–∏—Ç—å –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ reference –¥–∞–Ω—ñ

#### Timeout errors

**–ü—Ä–∏—á–∏–Ω–∞:** –ü–æ–≤—ñ–ª—å–Ω—ñ endpoints (AI generation, bulk operations)

**–†—ñ—à–µ–Ω–Ω—è:**
```bash
newman run collection.json \
    -e environment.json \
    --timeout-request 60000  # –ó–±—ñ–ª—å—à—Ç–µ –¥–æ 60 —Å–µ–∫—É–Ω–¥
```

#### 404 Not Found –∑—ñ –∑–º—ñ–Ω–Ω–∏–º–∏

**–ü—Ä–∏—á–∏–Ω–∞:** –ó–º—ñ–Ω–Ω–∞ –Ω–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `{{ad_id}}`)

**–†—ñ—à–µ–Ω–Ω—è:**
1. –ó–∞–ø—É—Å—Ç—ñ—Ç—å –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ –∑–∞–ø–∏—Ç–∏, —è–∫—ñ —Å—Ç–≤–æ—Ä—é—é—Ç—å —Ä–µ—Å—É—Ä—Å
2. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ Test Scripts - –≤–æ–Ω–∏ –ø–æ–≤–∏–Ω–Ω—ñ –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ IDs
3. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ —Ä–µ–∞–ª—å–Ω—ñ –∑–Ω–∞—á–µ–Ω–Ω—è –∑–∞–º—ñ—Å—Ç—å –∑–º—ñ–Ω–Ω–∏—Ö

### –õ–æ–≥—É–≤–∞–Ω–Ω—è

–£–≤—ñ–º–∫–Ω—ñ—Ç—å –¥–µ—Ç–∞–ª—å–Ω–µ –ª–æ–≥—É–≤–∞–Ω–Ω—è –≤ Newman:

```bash
newman run collection.json \
    -e environment.json \
    --verbose
```

–í Postman Console (View > Show Postman Console) –≤–∏ –ø–æ–±–∞—á–∏—Ç–µ:
- Pre-request script logs
- Request/Response details
- Test script logs
- Environment variables changes

## üìà –Ü–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü—ñ—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤

### –£—Å–ø—ñ—à–Ω–∏–π –∑–∞–ø—É—Å–∫

```
AutoRia API - Complete Test Suite

‚úì Health Check
‚úì User Login
‚úì Admin Login
‚úì Create User
...

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                         ‚îÇ           executed ‚îÇ            failed ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ              iterations ‚îÇ                  1 ‚îÇ                 0 ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                requests ‚îÇ                 94 ‚îÇ                 0 ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ            test-scripts ‚îÇ                186 ‚îÇ                 0 ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ              assertions ‚îÇ                226 ‚îÇ                 0 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ß–∞—Å—Ç–∫–æ–≤—ñ –ø—Ä–æ–≤–∞–ª–∏

```
   #  failure        detail
                                                                                
 1.  AssertionErr‚Ä¶  ‚úÖ –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á —Å—Ç–≤–æ—Ä–µ–Ω–∏–π —É—Å–ø—ñ—à–Ω–æ
                    expected 403 to equal 201
                    at assertion:0 in test-script
                    inside "Create User"
```

**–ê–Ω–∞–ª—ñ–∑:** 
- Assertion ‚Ññ 0 –ø—Ä–æ–≤–∞–ª–∏–≤—Å—è
- –û—á—ñ–∫—É–≤–∞–≤—Å—è –∫–æ–¥ 201, –æ—Ç—Ä–∏–º–∞–Ω–æ 403
- –ü—Ä–æ–±–ª–µ–º–∞ –∑ –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø—É

### –ö—Ä–∏—Ç–∏—á–Ω—ñ –ø–æ–º–∏–ª–∫–∏

```
newman

AutoRia API - Complete Test Suite

‚úó Health Check
  ECONNREFUSED: Connection refused

‚Üí User Login
  SKIPPED
```

**–ü—Ä–∏—á–∏–Ω–∞:** Backend –Ω–µ –∑–∞–ø—É—â–µ–Ω–æ –∞–±–æ –Ω–µ –¥–æ—Å—Ç—É–ø–Ω–∏–π –Ω–∞ –≤–∫–∞–∑–∞–Ω–æ–º—É URL

## üéØ Best Practices

1. **–ó–∞–≤–∂–¥–∏ –∑–∞–ø—É—Å–∫–∞–π—Ç–µ Complete Test Suite** –ø–µ—Ä–µ–¥ –∫–æ–º—ñ—Ç–æ–º –∑–º—ñ–Ω
2. **–ü–µ—Ä–µ–≤—ñ—Ä—è–π—Ç–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ñ –∫–æ–ª–µ–∫—Ü—ñ—ó** –ø—Ä–∏ —Ä–æ–∑—Ä–æ–±—Ü—ñ –Ω–æ–≤–∏—Ö —Ñ—ñ—á
3. **–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ `--bail`** –¥–ª—è —à–≤–∏–¥–∫–æ—ó –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –Ω–∞ –ø–æ–º–∏–ª–∫–∏
4. **–ì–µ–Ω–µ—Ä—É–π—Ç–µ HTML –∑–≤—ñ—Ç–∏** –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç—É–≤–∞–Ω–Ω—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤
5. **–ó–∞–ø—É—Å–∫–∞–π—Ç–µ —Ç–µ—Å—Ç–∏ –≤ CI/CD** –¥–ª—è –±–µ–∑–ø–µ—Ä–µ—Ä–≤–Ω–æ—ó —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó

## üìù –î–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–æ–≤–∏—Ö —Ç–µ—Å—Ç—ñ–≤

### –ö—Ä–æ–∫ 1: –°—Ç–≤–æ—Ä—ñ—Ç—å –∑–∞–ø–∏—Ç –≤ Postman

1. –î–æ–¥–∞–π—Ç–µ –Ω–æ–≤–∏–π request –≤ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—É –ø–∞–ø–∫—É
2. –ù–∞–ª–∞—à—Ç—É–π—Ç–µ Pre-request Script (—è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–∞ auth)
3. –î–æ–¥–∞–π—Ç–µ Test Script –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ

### –ö—Ä–æ–∫ 2: –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –∑–º—ñ–Ω–Ω—ñ

```javascript
// URL
{{base_url}}/api/ads/cars/{{ad_id}}

// Headers
Authorization: Bearer {{admin_access_token}}

// Body
{
    "title": "{{$randomProductName}}",
    "price": {{$randomInt}}
}
```

### –ö—Ä–æ–∫ 3: –î–æ–¥–∞–π—Ç–µ tests

```javascript
pm.test("‚úÖ –ó–∞–ø–∏—Ç —É—Å–ø—ñ—à–Ω–∏–π", () => {
    pm.response.to.have.status(200);
});

pm.test("‚úÖ –í—ñ–¥–ø–æ–≤—ñ–¥—å –º–∞—î –¥–∞–Ω—ñ", () => {
    const json = pm.response.json();
    pm.expect(json).to.have.property('id');
});
```

### –ö—Ä–æ–∫ 4: –ï–∫—Å–ø–æ—Ä—Ç—É–π—Ç–µ –∫–æ–ª–µ–∫—Ü—ñ—é

1. File > Export
2. Collection v2.1 (recommended)
3. –ó–±–µ—Ä–µ–∂—ñ—Ç—å –≤ `backend/`

## üîó –ö–æ—Ä–∏—Å–Ω—ñ –ø–æ—Å–∏–ª–∞–Ω–Ω—è

- [Newman Documentation](https://learning.postman.com/docs/running-collections/using-newman-cli/command-line-integration-with-newman/)
- [Postman Learning Center](https://learning.postman.com/)
- [Chai Assertion Library](https://www.chaijs.com/api/bdd/)
- [pm.* API Reference](https://learning.postman.com/docs/writing-scripts/script-references/postman-sandbox-api-reference/)

---

## üìù –Ü—Å—Ç–æ—Ä—ñ—è –∑–º—ñ–Ω

- **v1.1** (2025-01-25): –û–±'—î–¥–Ω–∞–Ω–Ω—è –∑ POSTMAN_USAGE_GUIDE, –¥–æ–¥–∞–Ω–∞ —Å–µ–∫—Ü—ñ—è –ø—Ä–æ –∑–∞–ø—É—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏—Ö –ø–∞–ø–æ–∫, –ø–µ—Ä–µ–∫–ª–∞–¥ –Ω–∞ —É–∫—Ä–∞—ó–Ω—Å—å–∫—É
- **v1.0** (2025-01-24): –ü–µ—Ä—à–∞ –≤–µ—Ä—Å—ñ—è –∫–µ—Ä—ñ–≤–Ω–∏—Ü—Ç–≤–∞

**–í–µ—Ä—Å—ñ—è:** 1.1  
**–û—Å—Ç–∞–Ω–Ω—î –æ–Ω–æ–≤–ª–µ–Ω–Ω—è:** 2025-01-25
