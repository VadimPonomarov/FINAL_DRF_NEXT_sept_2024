# Universal LLM-Based Web Crawler

## –ö–æ–Ω—Ü–µ–ø—Ü–∏—è

**–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –∫—Ä–∞—É–ª–µ—Ä** - —ç—Ç–æ –Ω–æ–≤—ã–π –ø–æ–¥—Ö–æ–¥ –∫ –≤–µ–±-–∫—Ä–∞—É–ª–∏–Ω–≥—É, –≥–¥–µ **–ù–ò–ö–ê–ö–û–ì–û —Ö–∞—Ä–¥–∫–æ–¥–∏–Ω–≥–∞** - —Ç–æ–ª—å–∫–æ **–∏–Ω—Ç–µ–ª–ª–µ–∫—Ç LLM –º–æ–¥–µ–ª–µ–π**.

### –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

1. **üß† –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç –≤–º–µ—Å—Ç–æ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤**: LLM —Å–∞–º–∞ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–Ω—ã—Ö –∏ –∏–∑–≤–ª–µ–∫–∞–µ—Ç –∏—Ö
2. **üåç –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ—Å—Ç—å**: –†–∞–±–æ—Ç–∞–µ—Ç —Å –õ–Æ–ë–´–ú–ò —Å–∞–π—Ç–∞–º–∏ - –∫—É—Ä—Å—ã –≤–∞–ª—é—Ç, —Ü–µ–Ω—ã, —Å—Ç–∞—Ç—å–∏, —Ç–æ–≤–∞—Ä—ã
3. **üöÄ JavaScript-ready**: –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞–µ–º–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
4. **üìä –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: LLM —Å–æ–∑–¥–∞–µ—Ç —Ç–∞–±–ª–∏—Ü—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
5. **üéØ –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞**: –ü–æ–Ω–∏–º–∞–µ—Ç –∑–∞–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –∏–∑–≤–ª–µ–∫–∞–µ—Ç –∏–º–µ–Ω–Ω–æ —Ç–æ, —á—Ç–æ –Ω—É–∂–Ω–æ

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### UniversalCrawlerService

–û—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–∏—Å –¥–ª—è —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–≥–æ –∫—Ä–∞—É–ª–∏–Ω–≥–∞ —Å LLM extraction.

```python
from apps.chat.services.universal_crawler_service import universal_crawler_service

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
result = await universal_crawler_service.crawl_with_llm_extraction(
    url="https://kurs.com.ua/ru/gorod/742-zaporoje",
    query="—Å–ø–∞—Ä—Å—å –∫—É—Ä—Å—ã –≤–∞–ª—é—Ç",
    max_depth=2,
    max_links=5
)
```

### –ü—Ä–æ—Ü–µ—Å—Å —Ä–∞–±–æ—Ç—ã

```
1. üì° –ó–∞–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
       ‚Üì
2. ü§ñ LLM –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –Ω—É–∂–µ–Ω –ª–∏ deep crawl
       ‚Üì
3. üåê Crawl4AI —Å JavaScript rendering
       ‚Üì (–∞–≤—Ç–æ-—Å–∫—Ä–æ–ª–ª–∏–Ω–≥, –æ–∂–∏–¥–∞–Ω–∏–µ network idle)
4. üìÑ –°–æ–±–∏—Ä–∞–µ—Ç—Å—è –∫–æ–Ω—Ç–µ–Ω—Ç —Å–æ –≤—Å–µ—Ö —Å—Ç—Ä–∞–Ω–∏—Ü
       ‚Üì
5. üß† LLM –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∫–æ–Ω—Ç–µ–Ω—Ç –∏ –∏–∑–≤–ª–µ–∫–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ
       ‚Üì
6. üìä –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã
       ‚Üì
7. ‚úÖ –í–æ–∑–≤—Ä–∞—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
```

## –ú–µ—Ç–æ–¥—ã

### `crawl_with_llm_extraction(url, query, max_depth, max_links)`

–ì–ª–∞–≤–Ω—ã–π –º–µ—Ç–æ–¥ –¥–ª—è —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–≥–æ –∫—Ä–∞—É–ª–∏–Ω–≥–∞.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `url` (str): URL –¥–ª—è –∫—Ä–∞—É–ª–∏–Ω–≥–∞
- `query` (str): –ó–∞–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–æ–±—ä—è—Å–Ω—è–µ—Ç —á—Ç–æ –∏–∑–≤–ª–µ–∫–∞—Ç—å)
- `max_depth` (int): –ì–ª—É–±–∏–Ω–∞ –∫—Ä–∞—É–ª–∏–Ω–≥–∞ (default: 2)
- `max_links` (int): –ú–∞–∫—Å–∏–º—É–º –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö —Å—Å—ã–ª–æ–∫ (default: 5)

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**
```python
{
    'success': True,
    'url': 'https://example.com',
    'extracted_data': {
        'items': [
            {'field1': 'value1', 'field2': 'value2'},
            ...
        ],
        'summary': '–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ',
        'data_type': 'currency_rates|products|articles|...',
        'columns': ['field1', 'field2', ...]
    },
    'table_html': '<table>...</table>',  # –°—Ç–∏–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞
    'table_data': [...],  # –î–∞–Ω–Ω—ã–µ –¥–ª—è —Ç–∞–±–ª–∏—Ü—ã
    'total_pages': 3
}
```

### `_crawl_with_js(url, max_depth, max_links)`

–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –º–µ—Ç–æ–¥ –¥–ª—è –∫—Ä–∞—É–ª–∏–Ω–≥–∞ —Å JavaScript rendering.

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–∫—Ä–æ–ª–ª–∏–Ω–≥ –¥–ª—è lazy-loading
- –û–∂–∏–¥–∞–Ω–∏–µ `networkidle` –¥–ª—è AJAX –∑–∞–ø—Ä–æ—Å–æ–≤
- –ó–∞–¥–µ—Ä–∂–∫–∞ 3 —Å–µ–∫—É–Ω–¥—ã –ø–æ—Å–ª–µ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞
- –†–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π –æ–±—Ö–æ–¥ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö —Å—Å—ã–ª–æ–∫

### `_extract_with_llm(content, url, query)`

–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ LLM.

**–ü—Ä–æ–º–ø—Ç —Å—Ç—Ä–∞—Ç–µ–≥–∏—è:**
1. –ê–Ω–∞–ª–∏–∑ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (–¥–æ 15000 —Å–∏–º–≤–æ–ª–æ–≤)
2. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ –¥–∞–Ω–Ω—ã—Ö
3. –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π JSON
4. –ì–∏–±–∫–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è –ø–æ–ª–µ–π

**–ü—Ä–∏–º–µ—Ä—ã –∏–∑–≤–ª–µ—á–µ–Ω–∏—è:**

**–ö—É—Ä—Å—ã –≤–∞–ª—é—Ç:**
```json
{
  "items": [
    {"currency": "USD", "buy": "41.50", "sell": "42.00"},
    {"currency": "EUR", "buy": "45.20", "sell": "46.10"}
  ],
  "summary": "–ò–∑–≤–ª–µ—á–µ–Ω–æ 2 –∫—É—Ä—Å–∞ –≤–∞–ª—é—Ç",
  "data_type": "currency_rates",
  "columns": ["currency", "buy", "sell"]
}
```

**–¢–æ–≤–∞—Ä—ã:**
```json
{
  "items": [
    {"name": "–¢–æ–≤–∞—Ä –ê", "price": "100.00", "currency": "UAH"},
    {"name": "–¢–æ–≤–∞—Ä –ë", "price": "150.00", "currency": "UAH"}
  ],
  "summary": "–ù–∞–π–¥–µ–Ω–æ 2 —Ç–æ–≤–∞—Ä–∞",
  "data_type": "products",
  "columns": ["name", "price", "currency"]
}
```

### `_format_as_table(extracted, query)`

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ HTML —Ç–∞–±–ª–∏—Ü—ã –∏–∑ –∏–∑–≤–ª–µ—á–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.

**–ò—Å–ø–æ–ª—å–∑—É–µ—Ç:**
- pandas –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏—è
- Bootstrap –∫–ª–∞—Å—Å—ã –¥–ª—è —Å—Ç–∏–ª–∏–∑–∞—Ü–∏–∏
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –ø–æ—Ä—è–¥–æ–∫ –∫–æ–ª–æ–Ω–æ–∫

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

### –í crawler_nodes_refactored.py

```python
from apps.chat.services.universal_crawler_service import universal_crawler_service

def crawl4ai_ask_node(state: AgentState) -> AgentState:
    """
    Universal crawler using LLM-based intelligent extraction.
    """
    # –ò—Å–ø–æ–ª—å–∑—É–µ—Ç universal_crawler_service –¥–ª—è deep crawl
    if needs_deep:
        result = await universal_crawler_service.crawl_with_llm_extraction(
            url=url,
            query=state.query,
            max_depth=DEEP_CRAWL_CONFIG['max_depth'],
            max_links=DEEP_CRAWL_CONFIG['max_links']
        )
```

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –ö—É—Ä—Å—ã –≤–∞–ª—é—Ç

**–ó–∞–ø—Ä–æ—Å:**
```
—Å–ø–∞—Ä—Å—å –∫—É—Ä—Å—ã –≤–∞–ª—é—Ç —Å https://kurs.com.ua/ru/gorod/742-zaporoje
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```python
{
    'success': True,
    'extracted_data': {
        'items': [
            {'currency': 'USD', 'buy': '41.45', 'sell': '41.95'},
            {'currency': 'EUR', 'buy': '44.80', 'sell': '45.40'},
            {'currency': 'PLN', 'buy': '10.20', 'sell': '10.50'}
        ],
        'data_type': 'currency_rates',
        'summary': '–ò–∑–≤–ª–µ—á–µ–Ω–æ 3 –∫—É—Ä—Å–∞ –≤–∞–ª—é—Ç –¥–ª—è –≥–æ—Ä–æ–¥–∞ –ó–∞–ø–æ—Ä–æ–∂—å–µ'
    },
    'table_html': '<table class="table table-striped">...</table>',
    'total_pages': 1
}
```

### –ü—Ä–∏–º–µ—Ä 2: –¶–µ–Ω—ã –Ω–∞ —Ç–æ–≤–∞—Ä—ã

**–ó–∞–ø—Ä–æ—Å:**
```
–∏–∑–≤–ª–µ–∫–∏ –≤—Å–µ —Ü–µ–Ω—ã —Å https://rozetka.com.ua/ua/
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```python
{
    'success': True,
    'extracted_data': {
        'items': [
            {'name': '–ù–æ—É—Ç–±—É–∫ ASUS', 'price': '25999', 'currency': '–≥—Ä–Ω'},
            {'name': '–¢–µ–ª–µ—Ñ–æ–Ω Samsung', 'price': '15999', 'currency': '–≥—Ä–Ω'}
        ],
        'data_type': 'products',
        'summary': '–ù–∞–π–¥–µ–Ω–æ 2 —Ç–æ–≤–∞—Ä–∞ —Å —Ü–µ–Ω–∞–º–∏'
    },
    'table_html': '<table>...</table>',
    'total_pages': 3
}
```

### –ü—Ä–∏–º–µ—Ä 3: –°—Ç–∞—Ç—å–∏/–ù–æ–≤–æ—Å—Ç–∏

**–ó–∞–ø—Ä–æ—Å:**
```
–ø–æ–∫–∞–∂–∏ –ø–æ—Å–ª–µ–¥–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç–∏ —Å https://news.example.com
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```python
{
    'extracted_data': {
        'items': [
            {'title': '–ó–∞–≥–æ–ª–æ–≤–æ–∫ 1', 'date': '2024-01-20', 'summary': '...'},
            {'title': '–ó–∞–≥–æ–ª–æ–≤–æ–∫ 2', 'date': '2024-01-19', 'summary': '...'}
        ],
        'data_type': 'articles'
    }
}
```

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

### ‚úÖ Vs. Hardcoded Patterns

| Hardcoded | Universal LLM |
|-----------|---------------|
| ‚ùå –†–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å –∏–∑–≤–µ—Å—Ç–Ω—ã–º–∏ —Å–∞–π—Ç–∞–º–∏ | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç —Å –õ–Æ–ë–´–ú–ò —Å–∞–π—Ç–∞–º–∏ |
| ‚ùå –†–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ | ‚úÖ LLM —Å–∞–º–∞ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É |
| ‚ùå –õ–æ–º–∞–µ—Ç—Å—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ä–∞–∑–º–µ—Ç–∫–∏ | ‚úÖ –ê–¥–∞–ø—Ç–∏—Ä—É–µ—Ç—Å—è –∫ –ª—é–±–æ–π —Ä–∞–∑–º–µ—Ç–∫–µ |
| ‚ùå –ù—É–∂–Ω–æ –æ–±–Ω–æ–≤–ª—è—Ç—å –∫–æ–¥ –¥–ª—è –Ω–æ–≤—ã—Ö —Å–∞–π—Ç–æ–≤ | ‚úÖ –ù—É–ª–µ–≤–æ–µ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ |
| ‚ùå –°–ª–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö | ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–Ω–∏–º–∞–µ—Ç –Ω–æ–≤—ã–µ —Ç–∏–ø—ã |

### üöÄ –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

1. **JavaScript rendering**: –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ SPA –∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
2. **Auto-scrolling**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –¥–ª—è lazy-loading
3. **Network idle waiting**: –û–∂–∏–¥–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è AJAX
4. **Deep crawling**: –°–ª–µ–¥–æ–≤–∞–Ω–∏–µ –ø–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–º —Å—Å—ã–ª–∫–∞–º
5. **Smart deduplication**: –£–º–Ω–æ–µ –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞
6. **Flexible schema**: –ì–∏–±–∫–∞—è —Å—Ö–µ–º–∞ –¥–∞–Ω–Ω—ã—Ö

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### LLM –º–æ–¥–µ–ª–∏

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –∏–∑ `llm_config.py`:

```python
# –î–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
task='classification'  # –¢–æ—á–Ω–∞—è –º–æ–¥–µ–ª—å —Å –Ω–∏–∑–∫–æ–π temperature
model='gpt-4o-mini'
temperature=0.1
max_tokens=1500

# –î–ª—è deep crawl detection
task='deep_crawl_detection'
temperature=0.0
max_tokens=10
```

### Crawl4AI –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

```python
{
    'headless': True,
    'browser_type': 'chromium',
    'page_timeout': 60000,
    'verbose': False,
    'bypass_cache': True,
    'wait_for': 'networkidle',
    'delay_before_return_html': 3.0
}
```

## –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### Fallback –º–µ—Ö–∞–Ω–∏–∑–º

–ï—Å–ª–∏ Crawl4AI –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω:
```python
async def _fallback_extraction(url, query):
    # –ò—Å–ø–æ–ª—å–∑—É–µ—Ç requests + LLM extraction
    # –†–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ JavaScript rendering
```

### Error handling

```python
try:
    result = await crawl_with_llm_extraction(url, query)
except Exception as e:
    return {
        'success': False,
        'error': str(e),
        'fallback_used': True
    }
```

## –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

### ‚úÖ DO

- –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–π—Ç–µ —á–µ—Ç–∫–∏–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –≤ `query`
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `max_depth=2-3` –¥–ª—è –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–π—Ç–µ `max_links=5-10` –¥–ª—è —Å–∫–æ—Ä–æ—Å—Ç–∏

### ‚ùå DON'T

- –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π `max_depth` (>3)
- –ù–µ –ø–æ–ª–∞–≥–∞–π—Ç–µ—Å—å –Ω–∞ –∂–µ—Å—Ç–∫–æ –∑–∞–¥–∞–Ω–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–Ω—ã—Ö
- –ù–µ –∏–≥–Ω–æ—Ä–∏—Ä—É–π—Ç–µ `success` —Ñ–ª–∞–≥

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –¢–∏–ø–∏—á–Ω–æ–µ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã

- **Simple crawl**: 2-5 —Å–µ–∫—É–Ω–¥
- **Deep crawl (2 —É—Ä–æ–≤–Ω—è)**: 10-20 —Å–µ–∫—É–Ω–¥
- **Deep crawl (3 —É—Ä–æ–≤–Ω—è)**: 30-60 —Å–µ–∫—É–Ω–¥

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `max_links` –¥–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
2. –°–Ω–∏–∂–∞–π—Ç–µ `max_depth` –µ—Å–ª–∏ –Ω–µ –Ω—É–∂–Ω–æ
3. LLM extraction –∫—ç—à–∏—Ä—É–µ—Ç—Å—è –Ω–∞ —É—Ä–æ–≤–Ω–µ Crawl4AI

## –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö

–ù–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è! LLM –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç –Ω–æ–≤—ã–π —Ç–∏–ø:

```python
# LLM —Å–∞–º–∞ —Å–æ–∑–¥–∞—Å—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–ª—è –Ω–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
query = "–∏–∑–≤–ª–µ–∫–∏ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ —Ä–µ–π—Å–æ–≤"
# –†–µ–∑—É–ª—å—Ç–∞—Ç: data_type='flight_schedule'
#            columns=['flight', 'departure', 'arrival', 'status']
```

### –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–º–ø—Ç–æ–≤

–ú–æ–∂–Ω–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å `_extract_with_llm()` –¥–ª—è —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö –∑–∞–¥–∞—á.

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

```python
logger.info(f"üöÄ –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –∫—Ä–∞—É–ª–∏–Ω–≥: {url}")
logger.info(f"üìù –ó–∞–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: {query}")
logger.info(f"‚úÖ –ö—Ä–∞—É–ª–∏–Ω–≥ –∑–∞–≤–µ—Ä—à–µ–Ω: {len(all_content)} —Å—Ç—Ä–∞–Ω–∏—Ü")
logger.info(f"ü§ñ LLM –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ {len(content)} —Å–∏–º–≤–æ–ª–æ–≤")
logger.info(f"‚úÖ LLM –∏–∑–≤–ª–µ–∫–ª–æ {len(items)} —ç–ª–µ–º–µ–Ω—Ç–æ–≤")
logger.info(f"üìä –¢–∏–ø –¥–∞–Ω–Ω—ã—Ö: {data_type}")
```

### –ú–µ—Ç—Ä–∏–∫–∏

```python
metadata = {
    "crawl_method": "universal_llm",
    "total_pages": 3,
    "items_found": 15,
    "data_type": "currency_rates",
    "has_table": True,
    "universal_extraction": True
}
```

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

```bash
# Python packages
pip install crawl4ai
pip install pandas

# –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏
pip install seaborn matplotlib
```

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**Universal LLM-Based Crawler** - —ç—Ç–æ —Ä–µ–≤–æ–ª—é—Ü–∏–æ–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –∫ –≤–µ–±-–∫—Ä–∞—É–ª–∏–Ω–≥—É:
- ‚úÖ –ù–∏–∫–∞–∫–æ–≥–æ —Ö–∞—Ä–¥–∫–æ–¥–∏–Ω–≥–∞
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç —Å –ª—é–±—ã–º–∏ —Å–∞–π—Ç–∞–º–∏
- ‚úÖ –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ JavaScript
- ‚úÖ –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**–ì–ª–∞–≤–Ω—ã–π –ø—Ä–∏–Ω—Ü–∏–ø**: "–ú–æ–¥–µ–ª—å —Å–∞–º–∞ –ø–æ–Ω–∏–º–∞–µ—Ç —á—Ç–æ –Ω—É–∂–Ω–æ –∏–∑–≤–ª–µ—á—å"

