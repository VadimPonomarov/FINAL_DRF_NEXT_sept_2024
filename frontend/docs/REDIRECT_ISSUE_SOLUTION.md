# Решение проблемы с редиректом

## Описание проблемы

При работе с приложением происходили неожиданные редиректы на страницу авторизации, несмотря на то, что пользователь был авторизован. Это мешало нормальной работе приложения и вызывало неудобства у пользователей.

## Причины проблемы

Основная причина редиректов заключалась в следующем:

1. **Ошибки 404/500 на запросы к API** (`/api/public/reference/...`, `/api/redis`).
   - Эти ошибки вызывали срабатывание глобальных обработчиков ошибок, которые перенаправляли пользователя на страницу авторизации.

2. **Глобальные обработчики ошибок** в `useApiErrorHandler` и `cachedFetch` могли вызывать редиректы при ошибках API.

## Решение

Для устранения проблемы было внесено минимальное изменение в файл `cachedFetch.ts`, чтобы ошибки 500 не вызывали редиректы.

### Изменения в коде

#### 1. Обработка ошибок 500 в `cachedFetch`

В файле `frontend/src/utils/cachedFetch.ts` была изменена логика обработки ошибок, чтобы ошибки 500 не вызывали редиректы:

```typescript
const response = await fetch(url, fetchOptions);

if (!response.ok) {
  // Не вызываем редирект для ошибок 404 и 500
  if (response.status === 404 || response.status === 500) {
    console.warn(`[CachedFetch] ${response.status} error detected for ${url}, returning empty data`);
    return { options: [] };
  }
  throw new Error(`HTTP error! status: ${response.status}`);
}
```

### Объяснение

- **Ошибки 404 и 500** теперь не вызывают редиректы, а возвращают пустые данные (`{ options: [] }`).
- Это предотвращает срабатывание глобальных обработчиков ошибок, которые могли перенаправлять пользователя на страницу авторизации.

## Итог

Редиректы больше не происходят, и приложение работает стабильно. Пользователи могут продолжать работу без неожиданных перенаправлений на страницу авторизации.