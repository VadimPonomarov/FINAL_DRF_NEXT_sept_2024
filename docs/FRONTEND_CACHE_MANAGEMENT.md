# Frontend Cache Management

## –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫—ç—à–µ–º —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—ã —Å –Ω–µ–ø–æ–ª–Ω—ã–º–∏ –∏–ª–∏ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–Ω—ã–º–∏ –±–∏–ª–¥–∞–º–∏ Next.js –≤ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö.

## –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è

### 1. Auto (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
```bash
FRONTEND_CACHE_STRATEGY=auto
```
- **–ü–æ–≤–µ–¥–µ–Ω–∏–µ**: –û—á–∏—â–∞–µ—Ç –∫—ç—à —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–Ω–æ–≥–æ –±–∏–ª–¥–∞
- **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**: –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫ –ø—Ä–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–º –±–∏–ª–¥–µ
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**: –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

### 2. Always (–ë–µ–∑–æ–ø–∞—Å–Ω—ã–π —Ä–µ–∂–∏–º)
```bash
FRONTEND_CACHE_STRATEGY=always
```
- **–ü–æ–≤–µ–¥–µ–Ω–∏–µ**: –í—Å–µ–≥–¥–∞ –æ—á–∏—â–∞–µ—Ç –∫—ç—à –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
- **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**: –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ —á–∏—Å—Ç–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
- **–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏**: –ú–µ–¥–ª–µ–Ω–Ω–µ–µ –∑–∞–ø—É—Å–∫
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**: –ü—Ä–∏ —á–∞—Å—Ç—ã—Ö –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å –∫—ç—à–µ–º

## –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:

1. **–ù–∞–ª–∏—á–∏–µ .next –ø–∞–ø–∫–∏**
2. **–ù–∞–ª–∏—á–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤**:
   - `.next/BUILD_ID`
   - `.next/package.json`
3. **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–∞–π–ª–æ–≤ –≤ –±–∏–ª–¥–µ** (–º–∏–Ω–∏–º—É–º 5)

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### –í docker-compose.yml
```yaml
environment:
  FRONTEND_CACHE_STRATEGY: auto  # –∏–ª–∏ always
```

### –í .env —Ñ–∞–π–ª–µ
```bash
FRONTEND_CACHE_STRATEGY=auto
```

### –ß–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É
```bash
FRONTEND_CACHE_STRATEGY=always docker-compose up frontend
```

## –õ–æ–≥–∏ –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –£—Å–ø–µ—à–Ω—ã–π –∑–∞–ø—É—Å–∫ (auto —Ä–µ–∂–∏–º)
```
üöÄ Starting Next.js application...
üîÑ Cache strategy: auto
üîç Auto cache strategy - will clean only if build is corrupted
‚úÖ Found pre-built .next folder - checking integrity...
‚úÖ Build integrity verified
üéØ Starting production server with verified build...
```

### –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–Ω–æ–≥–æ –±–∏–ª–¥–∞
```
üöÄ Starting Next.js application...
üîÑ Cache strategy: auto
‚ö†Ô∏è Incomplete build detected - missing essential files
‚ùå Pre-built .next folder is corrupted - will rebuild
üßπ Cleaning Next.js cache and build artifacts...
üîß Building Next.js application from scratch...
```

### Always —Ä–µ–∂–∏–º
```
üöÄ Starting Next.js application...
üîÑ Cache strategy: always
üßπ Always clean cache strategy - performing startup cleanup...
üßπ Cleaning Next.js cache and build artifacts...
```

## –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
**–†–µ—à–µ–Ω–∏–µ**: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `FRONTEND_CACHE_STRATEGY=always`

### –ü—Ä–æ–±–ª–µ–º–∞: –ú–µ–¥–ª–µ–Ω–Ω—ã–π –∑–∞–ø—É—Å–∫
**–†–µ—à–µ–Ω–∏–µ**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `FRONTEND_CACHE_STRATEGY=auto` –∏ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–∏–ª–¥ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π

### –ü—Ä–æ–±–ª–µ–º–∞: –û—à–∏–±–∫–∏ —Å–±–æ—Ä–∫–∏
**–†–µ—à–µ–Ω–∏–µ**: 
1. –û—á–∏—Å—Ç–∏—Ç–µ –ª–æ–∫–∞–ª—å–Ω—ã–π –±–∏–ª–¥: `rm -rf frontend/.next`
2. –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ: `cd frontend && npm run build`
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –¥–µ–ø–ª–æ–µ–º

–°–∏—Å—Ç–µ–º–∞ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ —Å —Å–∫—Ä–∏–ø—Ç–æ–º –¥–µ–ø–ª–æ—è:
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö
- –†—É—á–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞ —á–µ—Ä–µ–∑ –º–µ–Ω—é
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ—Å—Ç–æ—è–Ω–∏—è –±–∏–ª–¥–∞

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏**: `FRONTEND_CACHE_STRATEGY=auto`
2. **–î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞**: `FRONTEND_CACHE_STRATEGY=auto` —Å –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–º –±–∏–ª–¥–æ–º
3. **–ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö**: `FRONTEND_CACHE_STRATEGY=always` –≤—Ä–µ–º–µ–Ω–Ω–æ
4. **CI/CD**: –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —á–∏—Å—Ç—ã–π –±–∏–ª–¥

## –§–∞–π–ª—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

- `frontend/start.sh` - –û—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞
- `frontend/start-optimized.sh` - –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–∫—Ä–∏–ø—Ç
- `docker-compose.yml` - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
- `.env` - –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
