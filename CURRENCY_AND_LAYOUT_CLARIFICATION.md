# üí± –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤–∞–ª—é—Ç –∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–µ–∫

## ‚úÖ –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤–∞–ª—é—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ

### Backend (—É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ)

**–§–∞–π–ª**: `backend/apps/ads/serializers/car_ad_serializer.py`

#### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. **–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è** –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç:
   - `price` = 25000
   - `currency` = "USD"

2. **–ü—Ä–∏ —á—Ç–µ–Ω–∏–∏** backend –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç —á–µ—Ä–µ–∑ `CurrencyService`:
   - `price_usd` (—Å—Ç—Ä–æ–∫–∏ 485-513)
   - `price_eur` (—Å—Ç—Ä–æ–∫–∏ 515-543)
   - `price_uah` (—Å—Ç—Ä–æ–∫–∏ 545-575)

3. **–ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è —á–µ—Ä–µ–∑ UAH pivot**:
   ```python
   # –ü—Ä–∏–º–µ—Ä: USD ‚Üí EUR
   # –®–∞–≥ 1: USD ‚Üí UAH
   amount_uah = amount * usd_uah_rate
   
   # –®–∞–≥ 2: UAH ‚Üí EUR
   price_eur = amount_uah / eur_uah_rate
   ```

#### –ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞ API:

```json
{
  "id": 348,
  "price": 25000,      // –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞
  "currency": "USD",   // –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–∞—è –≤–∞–ª—é—Ç–∞
  
  "price_usd": 25000.00,   // ‚Üê –†–∞—Å—Å—á–∏—Ç–∞–Ω–æ backend
  "price_eur": 23150.00,   // ‚Üê –†–∞—Å—Å—á–∏—Ç–∞–Ω–æ backend (–∫—É—Ä—Å ~1.08)
  "price_uah": 1037500.00  // ‚Üê –†–∞—Å—Å—á–∏—Ç–∞–Ω–æ backend (–∫—É—Ä—Å ~41.5)
}
```

**–ò—Å—Ç–æ—á–Ω–∏–∫ –∫—É—Ä—Å–æ–≤**: `CurrencyService.get_rate()` - –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ –∫—É—Ä—Å—ã –∏–∑ –ë–î

---

## ‚úÖ –î–≤–∞ —Ä–∞–∑–Ω—ã—Ö –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∫–∞—Ä—Ç–æ—á–µ–∫

### 1. –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–ø–∏—Å–∫–∞ (SearchPage) - –ù–æ–≤–æ–µ –∫–æ–º–ø–∞–∫—Ç–Ω–æ–µ

**–§–∞–π–ª**: `frontend/src/components/AutoRia/Pages/SearchPage.tsx`  
**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç**: `CarAdCard` (–∏–º–ø–æ—Ä—Ç –Ω–∞ —Å—Ç—Ä–æ–∫–µ 28)

**–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ**: –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ, –∫–æ–º–ø–∞–∫—Ç–Ω–æ–µ (~120-140px –≤—ã—Å–æ—Ç–∞)

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ [Image] ‚îÇ Title                       ‚îÇ
‚îÇ  48px   ‚îÇ $25,000 USD                 ‚îÇ
‚îÇ  wide   ‚îÇ 2021 ‚Ä¢ 86 859 –∫–º ‚Ä¢ –ë–æ–ª–µ—Ö—ñ–≤ ‚îÇ
‚îÇ         ‚îÇ üëÅÔ∏è 0 ‚≠ê 0 üìû 0  [Phone]   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
- ‚úÖ ~60% —ç–∫–æ–Ω–æ–º–∏–∏ –º–µ—Å—Ç–∞
- ‚úÖ –í 2 —Ä–∞–∑–∞ –±–æ–ª—å—à–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–π –Ω–∞ —ç–∫—Ä–∞–Ω–µ
- ‚úÖ –ë—ã—Å—Ç—Ä–µ–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å —Å–ø–∏—Å–æ–∫

**–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤**:
- `/autoria/search` (—Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–æ–∏—Å–∫–∞)
- –í–æ–∑–º–æ–∂–Ω–æ –≤ –¥—Ä—É–≥–∏—Ö —Å–ø–∏—Å–∫–∞—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π

---

### 2. –°—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–µ—Ç–∞–ª–µ–π (AdDetailPage) - –°—Ç–∞—Ä–æ–µ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ

**–§–∞–π–ª**: `frontend/src/components/AutoRia/Pages/AdDetailPage.tsx`  
**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç**: Inline layout (–ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ—Ç CarAdCard)

**–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ**: –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ, –¥–µ—Ç–∞–ª—å–Ω–æ–µ

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                     ‚îÇ
‚îÇ   Large Gallery     ‚îÇ
‚îÇ   (full width)      ‚îÇ
‚îÇ                     ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ Title               ‚îÇ
‚îÇ $25,000 USD         ‚îÇ
‚îÇ                     ‚îÇ
‚îÇ Full Description    ‚îÇ
‚îÇ (–º–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞)      ‚îÇ
‚îÇ                     ‚îÇ
‚îÇ Characteristics     ‚îÇ
‚îÇ (–¥–µ—Ç–∞–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞) ‚îÇ
‚îÇ                     ‚îÇ
‚îÇ Contact Info        ‚îÇ
‚îÇ Map / Location      ‚îÇ
‚îÇ                     ‚îÇ
‚îÇ Similar Ads         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
- ‚úÖ –ü–æ–ª–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è —Å—Ä–∞–∑—É
- ‚úÖ –ë–æ–ª—å—à–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (–≥–∞–ª–µ—Ä–µ—è)
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ
- ‚úÖ –ö–∞—Ä—Ç–∞, –∫–æ–Ω—Ç–∞–∫—Ç—ã, –ø–æ—Ö–æ–∂–∏–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è

**–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤**:
- `/autoria/ad/[id]` (—Å—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞)

---

## –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–π

| –ê—Å–ø–µ–∫—Ç | SearchPage (–°–ø–∏—Å–æ–∫) | AdDetailPage (–î–µ—Ç–∞–ª–∏) |
|--------|---------------------|----------------------|
| **Layout** | –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π | –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π |
| **–í—ã—Å–æ—Ç–∞** | ~120-140px | ~1000-2000px |
| **–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ** | –ú–∞–ª–µ–Ω—å–∫–æ–µ (48px wide) | –ë–æ–ª—å—à–æ–µ (full width gallery) |
| **–û–ø–∏—Å–∞–Ω–∏–µ** | –ù–µ—Ç | –ü–æ–ª–Ω–æ–µ |
| **–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏** | –û—Å–Ω–æ–≤–Ω—ã–µ (3-4 —à—Ç) | –í—Å–µ –¥–µ—Ç–∞–ª–∏ |
| **–¶–µ–ª—å** | –ë—ã—Å—Ç—Ä–æ–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ | –ü–æ–ª–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è |
| **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç** | `CarAdCard` (–Ω–æ–≤—ã–π) | Inline (—Å—Ç–∞—Ä—ã–π) |

---

## –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤–∞–ª—é—Ç –Ω–∞ Frontend

### –í —Å–ø–∏—Å–∫–µ (SearchPage)

```tsx
// frontend/src/components/AutoRia/Components/CarAdCard.tsx
const getPriceInCurrency = (): { price: number | null; currency: string } => {
  switch (currency) {
    case 'USD':
      return { price: ad.price_usd || ad.price, currency: 'USD' };
    case 'EUR':
      return { price: ad.price_eur || ad.price, currency: 'EUR' };
    case 'UAH':
      return { price: ad.price_uah || ad.price, currency: 'UAH' };
    default:
      return { price: ad.price, currency: ad.currency || 'USD' };
  }
};
```

### –ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –¥–µ—Ç–∞–ª–µ–π (AdDetailPage)

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç `usePriceConverter` hook –∏–ª–∏ –∞–Ω–∞–ª–æ–≥–∏—á–Ω—É—é –ª–æ–≥–∏–∫—É –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ü–µ–Ω—ã –≤ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –≤–∞–ª—é—Ç–µ.

---

## –ü—Ä–∏–º–µ—Ä—ã –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏

### –ü—Ä–∏–º–µ—Ä 1: –û–±—ä—è–≤–ª–µ–Ω–∏–µ –≤ USD

**Input** (–ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏):
```json
{
  "price": 25000,
  "currency": "USD"
}
```

**Output** (–ø—Ä–∏ —á—Ç–µ–Ω–∏–∏):
```json
{
  "price": 25000,
  "currency": "USD",
  "price_usd": 25000.00,
  "price_eur": 23150.00,  // –ö—É—Ä—Å 1 USD = 0.926 EUR
  "price_uah": 1037500.00 // –ö—É—Ä—Å 1 USD = 41.5 UAH
}
```

### –ü—Ä–∏–º–µ—Ä 2: –û–±—ä—è–≤–ª–µ–Ω–∏–µ –≤ EUR

**Input**:
```json
{
  "price": 20000,
  "currency": "EUR"
}
```

**Output**:
```json
{
  "price": 20000,
  "currency": "EUR",
  "price_usd": 21598.00,  // 1 EUR = 1.0799 USD
  "price_eur": 20000.00,
  "price_uah": 896000.00  // 1 EUR = 44.8 UAH
}
```

### –ü—Ä–∏–º–µ—Ä 3: –û–±—ä—è–≤–ª–µ–Ω–∏–µ –≤ UAH

**Input**:
```json
{
  "price": 1000000,
  "currency": "UAH"
}
```

**Output**:
```json
{
  "price": 1000000,
  "currency": "UAH",
  "price_usd": 24096.00,  // 1 UAH = 0.024096 USD
  "price_eur": 22321.00,  // 1 UAH = 0.022321 EUR
  "price_uah": 1000000.00
}
```

---

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫—É—Ä—Å–æ–≤

–ö—É—Ä—Å—ã –±–µ—Ä—É—Ç—Å—è –∏–∑ `CurrencyService`:

```python
# backend/apps/currency/services.py
usd_uah = CurrencyService.get_rate("UAH", "USD")  # UAH –∑–∞ 1 USD
eur_uah = CurrencyService.get_rate("UAH", "EUR")  # UAH –∑–∞ 1 EUR
```

**–§–æ—Ä–º—É–ª–∞ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏:**

```python
# USD ‚Üí EUR
amount_uah = amount_usd * usd_uah_rate
price_eur = amount_uah / eur_uah_rate

# –ò–ª–∏ –Ω–∞–ø—Ä—è–º—É—é:
price_eur = amount_usd * (usd_uah_rate / eur_uah_rate)
```

---

## –†–µ–∑—é–º–µ

### ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. **–ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤–∞–ª—é—Ç**:
   - ‚úÖ Backend –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç –≤—Å–µ 3 –≤–∞–ª—é—Ç—ã
   - ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–µ –∫—É—Ä—Å—ã —á–µ—Ä–µ–∑ UAH pivot
   - ‚úÖ –û–∫—Ä—É–≥–ª–µ–Ω–∏–µ –¥–æ 2 –∑–Ω–∞–∫–æ–≤ –ø–æ—Å–ª–µ –∑–∞–ø—è—Ç–æ–π

2. **–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–µ–∫**:
   - ‚úÖ SearchPage: –Ω–æ–≤–æ–µ –∫–æ–º–ø–∞–∫—Ç–Ω–æ–µ (CarAdCard)
   - ‚úÖ AdDetailPage: —Å—Ç–∞—Ä–æ–µ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ (inline)

3. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç**:
   - ‚úÖ –ú–æ–∂–Ω–æ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å –≤–∞–ª—é—Ç—É —á–µ—Ä–µ–∑ CurrencySelector
   - ‚úÖ –¶–µ–Ω—ã –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ (–¥–∞–Ω–Ω—ã–µ —É–∂–µ –µ—Å—Ç—å)
   - ‚úÖ –ë—ã—Å—Ç—Ä–æ–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ø–∏—Å–∫–∞ + –¥–µ—Ç–∞–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä

### üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è:

- –ö—É—Ä—Å—ã –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ `CurrencyService` (—Å–º. –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é currency app)
- Frontend –ø–æ–ª—É—á–∞–µ—Ç –≤—Å–µ 3 —Ü–µ–Ω—ã –≤ –æ–¥–Ω–æ–º –∑–∞–ø—Ä–æ—Å–µ (–Ω–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤)
- –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –Ω–∞ backend (–µ–¥–∏–Ω–∞—è –ª–æ–≥–∏–∫–∞, –ª–µ–≥–∫–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å)

---

## –§–∞–π–ª—ã

**Backend**:
- `backend/apps/ads/serializers/car_ad_serializer.py` - –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è —Ü–µ–Ω

**Frontend**:
- `frontend/src/components/AutoRia/Components/CarAdCard.tsx` - –∫–æ–º–ø–∞–∫—Ç–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ (—Å–ø–∏—Å–æ–∫)
- `frontend/src/components/AutoRia/Pages/SearchPage.tsx` - —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–ø–∏—Å–∫–∞
- `frontend/src/components/AutoRia/Pages/AdDetailPage.tsx` - —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–µ—Ç–∞–ª–µ–π (—Å—Ç–∞—Ä–æ–µ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ)
- `frontend/src/contexts/CurrencyContext.tsx` - –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –≤–∞–ª—é—Ç

