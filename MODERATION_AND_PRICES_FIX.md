# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è: –ú–æ–¥–µ—Ä–∞—Ü–∏—è –∏ –¶–µ–Ω—ã

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ 1: –ü–æ–∫–∞–∑ –≤—Å–µ—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –º–æ–¥–µ—Ä–∞—Ü–∏–∏

### –ü—Ä–æ–±–ª–µ–º–∞
–ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –º–æ–¥–µ—Ä–∞—Ü–∏–∏ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–ª–∏—Å—å –æ–±—ä—è–≤–ª–µ–Ω–∏—è –≤ —Å—Ç–∞—Ç—É—Å–µ `DRAFT`

### –†–µ—à–µ–Ω–∏–µ
**–§–∞–π–ª**: `backend/apps/ads/views/moderation_queue_views.py`

**–ë—ã–ª–æ**:
```python
queryset = queryset.filter(
    status__in=[
        AdStatusEnum.PENDING,
        AdStatusEnum.NEEDS_REVIEW,
        AdStatusEnum.REJECTED,
        AdStatusEnum.BLOCKED,
        AdStatusEnum.ACTIVE,
    ]
)
```

**–°—Ç–∞–ª–æ**:
```python
# –ï—Å–ª–∏ —Å—Ç–∞—Ç—É—Å —É–∫–∞–∑–∞–Ω –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö - —Ñ–∏–ª—å—Ç—Ä—É–µ–º –ø–æ –Ω–µ–º—É
status_filter = self.request.GET.get("status")
if status_filter:
    queryset = queryset.filter(status=status_filter)
# –ï—Å–ª–∏ —Å—Ç–∞—Ç—É—Å –Ω–µ —É–∫–∞–∑–∞–Ω - –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –í–°–ï –æ–±—ä—è–≤–ª–µ–Ω–∏—è
# (–≤–∫–ª—é—á–∞—è DRAFT, PENDING, ACTIVE, REJECTED, BLOCKED, NEEDS_REVIEW –∏ —Ç.–¥.)
```

–¢–µ–ø–µ—Ä—å –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –º–æ–¥–µ—Ä–∞—Ü–∏–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è **–≤—Å–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è** –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç —Å—Ç–∞—Ç—É—Å–∞.

---

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ 2: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π —Å —Ä–∞–∑–Ω—ã–º–∏ —Å—Ç–∞—Ç—É—Å–∞–º–∏

### –ü—Ä–æ–±–ª–µ–º–∞
–í—Å–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è —Å–æ–∑–¥–∞–≤–∞–ª–∏—Å—å —Ç–æ–ª—å–∫–æ –≤ —Å—Ç–∞—Ç—É—Å–µ `ACTIVE` –∏–ª–∏ `DRAFT`

### –†–µ—à–µ–Ω–∏–µ
**–§–∞–π–ª**: `backend/apps/ads/management/commands/seed_car_ads.py`

**–ë—ã–ª–æ**:
```python
'status': AdStatusEnum.ACTIVE,  # –í—Å–µ –∞–∫—Ç–∏–≤–Ω—ã
'is_validated': True,
```

**–°—Ç–∞–ª–æ**:
```python
# –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Ä–∞–∑–Ω—ã–µ —Å—Ç–∞—Ç—É—Å—ã –¥–ª—è —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
# 50% - –∞–∫—Ç–∏–≤–Ω—ã–µ, 20% - –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏, 15% - —á–µ—Ä–Ω–æ–≤–∏–∫–∏, 10% - —Ç—Ä–µ–±—É—é—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏, 5% - –æ—Ç–∫–ª–æ–Ω–µ–Ω–Ω—ã–µ
status_weights = [
    (AdStatusEnum.ACTIVE, 50),
    (AdStatusEnum.PENDING, 20),
    (AdStatusEnum.DRAFT, 15),
    (AdStatusEnum.NEEDS_REVIEW, 10),
    (AdStatusEnum.REJECTED, 5),
]
statuses, weights = zip(*status_weights)
ad_status = random.choices(statuses, weights=weights)[0]

'status': ad_status,
'is_validated': (ad_status == AdStatusEnum.ACTIVE),  # –í–∞–ª–∏–¥–∏—Ä–æ–≤–∞–Ω—ã —Ç–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã–µ
```

### –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤:
- üü¢ **50%** - `ACTIVE` (–∞–∫—Ç–∏–≤–Ω—ã–µ, –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã–µ)
- üü° **20%** - `PENDING` (–æ–∂–∏–¥–∞—é—Ç –º–æ–¥–µ—Ä–∞—Ü–∏–∏)
- ‚ö™ **15%** - `DRAFT` (—á–µ—Ä–Ω–æ–≤–∏–∫–∏)
- üü† **10%** - `NEEDS_REVIEW` (—Ç—Ä–µ–±—É—é—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏)
- üî¥ **5%** - `REJECTED` (–æ—Ç–∫–ª–æ–Ω–µ–Ω–Ω—ã–µ)

---

## üí∞ –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è —Ü–µ–Ω –≤ —Ç—Ä–∏ –≤–∞–ª—é—Ç—ã

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç
**–§–∞–π–ª**: `backend/apps/ads/serializers/car_ad_serializer.py`

1. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç**:
   - `price` (—á–∏—Å–ª–æ, –Ω–∞–ø—Ä–∏–º–µ—Ä 15000)
   - `currency` (–≤–∞–ª—é—Ç–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä "USD")

2. **Backend –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç**:
   - `price_usd` - —Ü–µ–Ω–∞ –≤ USD
   - `price_eur` - —Ü–µ–Ω–∞ –≤ EUR
   - `price_uah` - —Ü–µ–Ω–∞ –≤ UAH

### –ê–ª–≥–æ—Ä–∏—Ç–º –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ (—á–µ—Ä–µ–∑ UAH pivot):

```python
# –®–∞–≥ 1: –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –≤–≤–µ–¥–µ–Ω–Ω—É—é —Ü–µ–Ω—É –≤ UAH
if currency == "UAH":
    amount_uah = price
elif currency == "USD":
    usd_to_uah_rate = CurrencyService.get_rate("UAH", "USD")
    amount_uah = price * usd_to_uah_rate
elif currency == "EUR":
    eur_to_uah_rate = CurrencyService.get_rate("UAH", "EUR")
    amount_uah = price * eur_to_uah_rate

# –®–∞–≥ 2: –ò–∑ UAH –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –≤–æ –≤—Å–µ –≤–∞–ª—é—Ç—ã
price_usd = amount_uah / usd_to_uah_rate
price_eur = amount_uah / eur_to_uah_rate
price_uah = amount_uah
```

### –ü—Ä–∏–º–µ—Ä:
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç: 15000 USD
‚Üì
Backend –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç:
  1. 15000 USD ‚Üí 555000 UAH (–ø–æ –∫—É—Ä—Å—É 37 UAH –∑–∞ 1 USD)
  2. 555000 UAH ‚Üí price_usd: 15000 USD (–∏—Å—Ö–æ–¥–Ω–∞—è)
  3. 555000 UAH ‚Üí price_eur: 13636 EUR (–ø–æ –∫—É—Ä—Å—É ~40.7 UAH –∑–∞ 1 EUR)
  4. 555000 UAH ‚Üí price_uah: 555000 UAH

Frontend –ø–æ–ª—É—á–∞–µ—Ç:
{
  "price": 15000,
  "currency": "USD",
  "price_usd": 15000.00,
  "price_eur": 13636.36,
  "price_uah": 555000.00
}
```

---

## üöÄ –ö–∞–∫ –ø—Ä–∏–º–µ–Ω–∏—Ç—å

### 1. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å backend (–¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –∫–æ–¥–µ)
```bash
docker-compose restart app
```

### 2. –ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
```bash
docker-compose exec app python manage.py seed_car_ads --count=50 --clear
```

### 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç
- –û—Ç–∫—Ä–æ–π—Ç–µ: http://localhost:3000/autoria/moderation
- –í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏—è —Å–æ –≤—Å–µ–º–∏ —Å—Ç–∞—Ç—É—Å–∞–º–∏
- –¶–µ–Ω—ã –¥–æ–ª–∂–Ω—ã –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –≤–æ –≤—Å–µ—Ö –≤–∞–ª—é—Ç–∞—Ö

---

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

‚úÖ –ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –º–æ–¥–µ—Ä–∞—Ü–∏–∏ —Ç–µ–ø–µ—Ä—å –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è **–í–°–ï** –æ–±—ä—è–≤–ª–µ–Ω–∏—è  
‚úÖ –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ —Å–æ–∑–¥–∞—é—Ç—Å—è —Å **—Ä–∞–∑–Ω—ã–º–∏ —Å—Ç–∞—Ç—É—Å–∞–º–∏** (—Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ)  
‚úÖ –¶–µ–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –≤ **—Ç—Ä–∏ –≤–∞–ª—é—Ç—ã** (USD, EUR, UAH)  
‚úÖ –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ **UAH pivot** —Å –∞–∫—Ç—É–∞–ª—å–Ω—ã–º–∏ –∫—É—Ä—Å–∞–º–∏

