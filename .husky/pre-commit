#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "üîç –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø–µ—Ä–µ–∫–ª–∞–¥—ñ–≤ –ø–µ—Ä–µ–¥ commit..."

# –ü–µ—Ä–µ—Ö—ñ–¥ —É frontend –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—é
cd frontend || exit 1

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø–æ–∫—Ä–∏—Ç—Ç—è –ø–µ—Ä–µ–∫–ª–∞–¥–∞–º–∏
npm run translations:coverage --if-present

# –Ø–∫—â–æ —î –ø–æ–º–∏–ª–∫–∏, –ø–æ–∫–∞–∑—É—î–º–æ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó
if [ $? -ne 0 ]; then
  echo ""
  echo "‚ùå –í–∏—è–≤–ª–µ–Ω–æ –ø—Ä–æ–±–ª–µ–º–∏ –∑ –ø–µ—Ä–µ–∫–ª–∞–¥–∞–º–∏!"
  echo ""
  echo "üí° –í–∏–ø—Ä–∞–≤—Ç–µ –ø—Ä–æ–±–ª–µ–º–∏:"
  echo "   1. –î–æ–¥–∞—Ç–∏ –≤—ñ–¥—Å—É—Ç–Ω—ñ –∫–ª—é—á—ñ: npm run translations:add-missing"
  echo "   2. –†–µ–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ —Ç–∏–ø–∏: npm run translations:generate-types"
  echo "   3. –ê–±–æ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç–∏ –ø–µ—Ä–µ–≤—ñ—Ä–∫—É: git commit --no-verify"
  echo ""
  exit 1
fi

echo "‚úÖ –ü–µ—Ä–µ–∫–ª–∞–¥–∏ –≤–∞–ª—ñ–¥–Ω—ñ!"
