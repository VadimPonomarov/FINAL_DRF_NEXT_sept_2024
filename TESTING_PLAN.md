# –ü–ª–∞–Ω —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–≥–æ –∫—Ä–∞—É–ª–µ—Ä–∞

## üéØ –¶–µ–ª—å —Ç–µ—Å—Ç–∞

–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ **–Ω–æ–≤—ã–π —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π LLM-based –∫—Ä–∞—É–ª–µ—Ä** –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∏–∑–≤–ª–µ–∫–∞–µ—Ç –∫—É—Ä—Å—ã –≤–∞–ª—é—Ç —Å `kurs.com.ua`.

## üîß –í–Ω–µ—Å–µ–Ω–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### 1. –£–≤–µ–ª–∏—á–µ–Ω delay –ø–µ—Ä–µ–¥ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ–º
- **–ë—ã–ª–æ**: 3 —Å–µ–∫—É–Ω–¥—ã
- **–°—Ç–∞–ª–æ**: 5 —Å–µ–∫—É–Ω–¥
- **–ü—Ä–∏—á–∏–Ω–∞**: –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –≤—Ä–µ–º–µ–Ω–∏ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ JS-–∫–æ–Ω—Ç–µ–Ω—Ç–∞

### 2. –î–æ–±–∞–≤–ª–µ–Ω–æ –∞–∫—Ç–∏–≤–Ω–æ–µ –æ–∂–∏–¥–∞–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤
```javascript
// –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ —Ç–µ–∫—Å—Ç–∞ USD, EUR –∏–ª–∏ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Å –∫–ª–∞—Å—Å–∞–º–∏ rate/currency
const waitForCurrencyRates = async () => {
    for (let i = 0; i < 20; i++) {  // –î–æ 10 —Å–µ–∫—É–Ω–¥
        const hasCurrencyData = 
            document.body.innerText.includes('USD') || 
            document.body.innerText.includes('EUR') ||
            document.querySelector('[class*="rate"]') ||
            document.querySelector('[class*="currency"]');
        
        if (hasCurrencyData) break;
        await new Promise(resolve => setTimeout(resolve, 500));
    }
};
```

### 3. –£–≤–µ–ª–∏—á–µ–Ω–∞ –∑–∞–¥–µ—Ä–∂–∫–∞ –ø–æ—Å–ª–µ —Å–∫—Ä–æ–ª–ª–∏–Ω–≥–∞
- **–ë—ã–ª–æ**: 1 —Å–µ–∫—É–Ω–¥–∞ –ø–æ—Å–ª–µ —Å–∫—Ä–æ–ª–ª–∏–Ω–≥–∞
- **–°—Ç–∞–ª–æ**: 2 —Å–µ–∫—É–Ω–¥—ã –ø–æ—Å–ª–µ —Å–∫—Ä–æ–ª–ª–∏–Ω–≥–∞

## üìã –¢–µ—Å—Ç –∫–µ–π—Å—ã

### Test Case 1: –ö—Ä–∞—É–ª–∏–Ω–≥ –∫—É—Ä—Å–æ–≤ –≤–∞–ª—é—Ç

**–ó–∞–ø—Ä–æ—Å:**
```
—Å–ø–∞—Ä—Å–∏ –∫—É—Ä—Å—ã –≤–∞–ª—é—Ç —Å https://kurs.com.ua/ru/gorod/742-zaporoje
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
üéØ –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Å https://kurs.com.ua/...
üìä –¢–∏–ø –¥–∞–Ω–Ω—ã—Ö: currency_rates
‚úÖ –ù–∞–π–¥–µ–Ω–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤: 3-10

üì¶ –î–∞–Ω–Ω—ã–µ:
‚Ä¢ currency: USD | buy: 41.XX | sell: 41.XX
‚Ä¢ currency: EUR | buy: 44.XX | sell: 45.XX
‚Ä¢ currency: PLN | buy: 10.XX | sell: 10.XX

[–ö—Ä–∞—Å–∏–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞ –≤ TableDisplay component]

üåê –ü—Ä–æ—Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ: 1 —Å—Ç—Ä–∞–Ω–∏—Ü
```

**–ù–ï –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
- ‚ùå –¢–æ–ª—å–∫–æ —Å—Å—ã–ª–∫–∏ –º–µ–Ω—é (–î–µ–Ω—å–≥–∏, –ù–æ–≤–æ—Å—Ç–∏, –û–±—â–µ–Ω–∏–µ)
- ‚ùå "–¶–µ–Ω—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã"
- ‚ùå –ü—É—Å—Ç–∞—è —Ç–∞–±–ª–∏—Ü–∞

### Test Case 2: –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- ‚úÖ –¢–∞–±–ª–∏—Ü–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ TableDisplay component
- ‚úÖ –ï—Å—Ç—å –∫–æ–ª–æ–Ω–∫–∏: –í–∞–ª—é—Ç–∞, –ü–æ–∫—É–ø–∫–∞, –ü—Ä–æ–¥–∞–∂–∞
- ‚úÖ –î–∞–Ω–Ω—ã–µ –≤ —Ç–∞–±–ª–∏—Ü–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç —Ç–µ–∫—Å—Ç—É
- ‚úÖ –¢–∞–±–ª–∏—Ü–∞ —Å—Ç–∏–ª–∏–∑–æ–≤–∞–Ω–∞ (Bootstrap –∫–ª–∞—Å—Å—ã)

### Test Case 3: –ê–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- ‚úÖ –ö—É—Ä—Å—ã —Ä–µ–∞–ª—å–Ω—ã–µ (–Ω–µ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ)
- ‚úÖ –ó–Ω–∞—á–µ–Ω–∏—è —Ä–∞–∑—É–º–Ω—ã–µ (USD ~41-42, EUR ~44-46)
- ‚úÖ –§–æ—Ä–º–∞—Ç —á–∏—Å–µ–ª –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π (XX.XX)

## üîç –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –≤ –ª–æ–≥–∞—Ö

### Backend logs (–µ—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–Ω—É—Ç –ø—Ä–æ–±–ª–µ–º—ã):

```bash
docker logs final_drf_next_sept_2024-app-1 --tail=100 | grep -E "–∫—Ä–∞—É–ª–∏–Ω–≥|Crawl|Universal|LLM"
```

**–ò—Å–∫–∞—Ç—å:**
- ‚úÖ "üöÄ –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –∫—Ä–∞—É–ª–∏–Ω–≥"
- ‚úÖ "üìÑ –ö—Ä–∞—É–ª–∏–Ω–≥ (–≥–ª—É–±–∏–Ω–∞ 0)"
- ‚úÖ "ü§ñ LLM –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö"
- ‚úÖ "‚úÖ LLM –∏–∑–≤–ª–µ–∫–ª–æ X —ç–ª–µ–º–µ–Ω—Ç–æ–≤"
- ‚úÖ "üìä –¢–∏–ø –¥–∞–Ω–Ω—ã—Ö: currency_rates"

**–û—à–∏–±–∫–∏:**
- ‚ùå "Crawl4AI not available"
- ‚ùå "LLM extraction failed"
- ‚ùå "No data extracted"

## üìä –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞

| –ö—Ä–∏—Ç–µ—Ä–∏–π | –°—Ç–∞—Ç—É—Å |
|----------|--------|
| –ò–∑–≤–ª–µ—á–µ–Ω—ã —Ä–µ–∞–ª—å–Ω—ã–µ –∫—É—Ä—Å—ã –≤–∞–ª—é—Ç | ‚è≥ |
| –¢–∞–±–ª–∏—Ü–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫—Ä–∞—Å–∏–≤–æ | ‚è≥ |
| –î–∞–Ω–Ω—ã–µ –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ (–Ω–µ –º–µ–Ω—é) | ‚è≥ |
| LLM –æ–ø—Ä–µ–¥–µ–ª–∏–ª —Ç–∏–ø –∫–∞–∫ currency_rates | ‚è≥ |
| –ú–∏–Ω–∏–º—É–º 3 –≤–∞–ª—é—Ç—ã –∏–∑–≤–ª–µ—á–µ–Ω–æ | ‚è≥ |

## üêõ Troubleshooting

### –ï—Å–ª–∏ –æ–ø—è—Ç—å —Ç–æ–ª—å–∫–æ —Å—Å—ã–ª–∫–∏ –º–µ–Ω—é:

1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –±–µ–∫–µ–Ω–¥ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏–ª—Å—è:**
   ```bash
   docker ps | grep app
   # –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å "Up X seconds" (–Ω–µ–¥–∞–≤–Ω–æ –∑–∞–ø—É—â–µ–Ω)
   ```

2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –Ω–∞ –º–æ–º–µ–Ω—Ç –∫—Ä–∞—É–ª–∏–Ω–≥–∞:**
   ```bash
   docker logs final_drf_next_sept_2024-app-1 --tail=50 -f
   ```

3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–æ–≤—ã–π —Å–µ—Ä–≤–∏—Å:**
   ```bash
   docker exec final_drf_next_sept_2024-app-1 python -c "from apps.chat.services.universal_crawler_service import universal_crawler_service; print('OK')"
   ```

### –ï—Å–ª–∏ "Crawl4AI not available":

```bash
docker exec final_drf_next_sept_2024-app-1 pip list | grep crawl4ai
```

### –ï—Å–ª–∏ delay –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–µ–Ω:

–£–≤–µ–ª–∏—á–∏—Ç—å –≤ `universal_crawler_service.py`:
```python
delay_before_return_html=7.0,  # –£–≤–µ–ª–∏—á–∏—Ç—å –¥–æ 7 —Å–µ–∫—É–Ω–¥
```

## üéØ –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Ç–µ—Å—Ç-—Å–∞–π—Ç—ã

–ï—Å–ª–∏ `kurs.com.ua` –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞:

1. **–ü—Ä–æ—Å—Ç—ã–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å–∞–π—Ç—ã:**
   - `https://www.xe.com/currency-rates/`
   - `https://www.google.com/finance/quote/USD-UAH`

2. **–î—Ä—É–≥–∏–µ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —Å–∞–π—Ç—ã:**
   - `https://minfin.com.ua/currency/`
   - `https://finance.ua/currency`

## ‚è±Ô∏è Timeline

- **13:00** - –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –±–µ–∫–µ–Ω–¥–∞
- **13:05** - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ —á–∞—Ç–±–æ—Ç
- **13:10** - –ê–Ω–∞–ª–∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- **13:15** - –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∏ (–µ—Å–ª–∏ –Ω—É–∂–Ω—ã)

## üìù –ó–∞–º–µ—Ç–∫–∏

- –°–∞–π—Ç `kurs.com.ua` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **—Ç—è–∂–µ–ª—ã–π JavaScript** –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∫—É—Ä—Å–æ–≤
- Crawl4AI –¥–æ–ª–∂–µ–Ω –ø–æ–¥–æ–∂–¥–∞—Ç—å **networkidle** –ø–µ—Ä–µ–¥ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ–º
- LLM –¥–æ–ª–∂–µ–Ω **–∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ** –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —á—Ç–æ —ç—Ç–æ currency_rates
- –ù–∏–∫–∞–∫–æ–≥–æ —Ö–∞—Ä–¥–∫–æ–¥–∏–Ω–≥–∞ - —Ç–æ–ª—å–∫–æ AI intelligence

---

**–ì–æ—Ç–æ–≤ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é —á–µ—Ä–µ–∑ 5 –º–∏–Ω—É—Ç!** üöÄ

